<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="915px" preserveAspectRatio="none" style="width:1063px;height:915px;" version="1.1" viewBox="0 0 1063 915" width="1063px" zoomAndPan="magnify"><defs><filter height="300%" id="f2lgmw0crtdlz" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><!--class Call--><rect fill="#F8F8F8" filter="url(#f2lgmw0crtdlz)" height="118.8007" id="Call" style="stroke: #383838; stroke-width: 1.5;" width="348" x="645.0194" y="350.5"/><ellipse cx="778.2694" cy="369.9001" fill="#FFFFFF" rx="11" ry="11" style="stroke: #383838; stroke-width: 1.0;"/><path d="M774.7694,365.9001 L774.7694,363.9001 L781.7694,363.9001 L781.7694,365.9001 L779.7694,365.9001 L779.7694,373.9001 L781.7694,373.9001 L781.7694,375.9001 L774.7694,375.9001 L774.7694,373.9001 L776.7694,373.9001 L776.7694,365.9001 L774.7694,365.9001 Z "/><text fill="#000000" font-family="Courier" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="77" x="796.7694" y="366.4441">«Interface»</text><text fill="#000000" font-family="Courier" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="28" x="821.2694" y="380.8442">Call</text><line style="stroke: #383838; stroke-width: 1.5;" x1="646.0194" x2="992.0194" y1="389.3002" y2="389.3002"/><text fill="#000000" font-family="Courier" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="336" x="651.0194" y="404.2443">Load(*memoryStorage, []naubuddy.FullCallListLeg)</text><text fill="#000000" font-family="Courier" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="322" x="651.0194" y="418.6444">UpdateData(*naubuddy.FullCallsListCall, int64)</text><text fill="#000000" font-family="Courier" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="161" x="651.0194" y="433.0445">ProjectIDChanged() bool</text><text fill="#000000" font-family="Courier" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="161" x="651.0194" y="447.4446">SpawnInboundCall() Call</text><text fill="#000000" font-family="Courier" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="203" x="651.0194" y="461.8447">OnCallEnd(endTimestamp int64)</text><!--class callState--><rect fill="#F8F8F8" filter="url(#f2lgmw0crtdlz)" height="147.6009" id="callState" style="stroke: #383838; stroke-width: 1.5;" width="95" x="851.5194" y="65.5"/><ellipse cx="866.5194" cy="84.9001" fill="#FFFFFF" rx="11" ry="11" style="stroke: #383838; stroke-width: 1.0;"/><path d="M870.5194,90.9001 L862.5194,90.9001 L862.5194,78.9001 L870.5194,78.9001 L870.5194,80.9001 L865.5194,80.9001 L865.5194,83.9001 L869.5194,83.9001 L869.5194,85.9001 L865.5194,85.9001 L865.5194,88.9001 L870.5194,88.9001 L870.5194,90.9001 Z "/><text fill="#000000" font-family="Courier" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="42" x="891.0194" y="81.4441">«Enum»</text><text fill="#000000" font-family="Courier" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="63" x="880.5194" y="95.8442">callState</text><line style="stroke: #383838; stroke-width: 1.5;" x1="852.5194" x2="945.5194" y1="104.3002" y2="104.3002"/><text fill="#000000" font-family="Courier" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="63" x="857.5194" y="119.2443">Undefined</text><text fill="#000000" font-family="Courier" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="49" x="857.5194" y="133.6444">Blocked</text><text fill="#000000" font-family="Courier" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="42" x="857.5194" y="148.0445">Queued</text><text fill="#000000" font-family="Courier" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="56" x="857.5194" y="162.4446">Callback</text><text fill="#000000" font-family="Courier" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="63" x="857.5194" y="176.8447">Unblocked</text><text fill="#000000" font-family="Courier" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="63" x="857.5194" y="191.2448">Connected</text><text fill="#000000" font-family="Courier" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="35" x="857.5194" y="205.6449">Ended</text><!--class callInfoBase--><rect fill="#F8F8F8" filter="url(#f2lgmw0crtdlz)" height="157.8755" id="callInfoBase" style="stroke: #383838; stroke-width: 1.5;" width="264" x="346.0194" y="331"/><ellipse cx="431.7694" cy="350.4001" fill="#FFFFFF" rx="11" ry="11" style="stroke: #383838; stroke-width: 1.0;"/><path d="M431.4882,350.947 Q429.4569,350.3064 428.7382,349.5954 Q428.0194,348.8845 428.0194,347.697 Q428.0194,346.1501 429.035,345.2751 Q430.0507,344.4001 431.8163,344.4001 Q432.6288,344.4001 433.4335,344.6501 Q434.2382,344.9001 435.0194,345.4001 L435.0194,348.4001 Q434.3944,347.4157 433.746,346.9079 Q433.0975,346.4001 432.4725,346.4001 Q431.7694,346.4001 431.4257,346.697 Q431.0819,346.9939 431.16,347.5407 Q431.2069,347.9626 431.4569,348.2204 Q431.7069,348.4782 432.4413,348.7439 L433.0819,348.9939 Q434.7069,349.6032 435.4257,350.5954 Q436.1444,351.5876 436.0194,353.1189 Q436.0194,354.7751 434.9257,355.5876 Q433.8319,356.4001 431.6132,356.4001 Q430.7069,356.4001 429.7928,356.1501 Q428.8788,355.9001 428.0194,355.4001 L428.0194,352.4001 Q428.8944,353.4157 429.7069,353.9079 Q430.5194,354.4001 431.3319,354.4001 Q432.1288,354.4001 432.5741,353.9939 Q433.0194,353.5876 433.0194,352.8532 Q433.0194,352.3064 432.8163,351.8923 Q432.6132,351.4782 432.2225,351.2439 L431.4882,350.947 Z "/><text fill="#000000" font-family="Courier" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="77" x="455.7694" y="346.9441">«Structure»</text><text fill="#000000" font-family="Courier" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="84" x="452.2694" y="361.3442">callInfoBase</text><line style="stroke: #383838; stroke-width: 1.5;" x1="347.0194" x2="609.0194" y1="369.8002" y2="369.8002"/><polygon fill="none" points="357.0194,378.2846,353.0194,384.2846,361.0194,384.2846" style="stroke: #535353; stroke-width: 1.0;"/><text fill="#000000" font-family="monospace" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="147" x="366.0194" y="384.9389">Общие свойства звонка</text><polygon fill="none" points="357.0194,392.2533,353.0194,398.2533,361.0194,398.2533" style="stroke: #535353; stroke-width: 1.0;"/><text fill="#000000" font-family="monospace" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="238" x="366.0194" y="398.9076">Сервис доступа к Redis по проектам</text><text fill="#000000" font-family="Courier" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="0" x="373.0194" y="412.6818"/><ellipse cx="357.0194" cy="443.0223" fill="none" rx="3" ry="3" style="stroke: #545454; stroke-width: 1.0;"/><text fill="#000000" font-family="monospace" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="182" x="366.0194" y="445.6766">Реализация интерфейса Call</text><text fill="#000000" font-family="Courier" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="0" x="373.0194" y="459.4507"/><line style="stroke: #383838; stroke-width: 1.5;" x1="347.0194" x2="429.0194" y1="427.3379" y2="427.3379"/><text fill="#000000" font-family="Courier" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="98" x="429.0194" y="430.5819">implement Call</text><line style="stroke: #383838; stroke-width: 1.5;" x1="527.0194" x2="609.0194" y1="427.3379" y2="427.3379"/><line style="stroke: #383838; stroke-width: 1.0; stroke-dasharray: 1.0,2.0;" x1="347.0194" x2="609.0194" y1="466.9068" y2="466.9068"/><polygon fill="#6C6C6C" points="357.0194,475.3911,353.0194,481.3911,361.0194,481.3911" style="stroke: #535353; stroke-width: 1.0;"/><text fill="#000000" font-family="monospace" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="133" x="366.0194" y="482.0454">Общие методы звонка</text><!--class legsCollection--><rect fill="#F8F8F8" filter="url(#f2lgmw0crtdlz)" height="155.1696" id="legsCollection" style="stroke: #383838; stroke-width: 1.5;" width="334" x="311.0194" y="549"/><ellipse cx="424.7694" cy="568.4001" fill="#FFFFFF" rx="11" ry="11" style="stroke: #383838; stroke-width: 1.0;"/><path d="M424.4882,568.947 Q422.4569,568.3064 421.7382,567.5954 Q421.0194,566.8845 421.0194,565.697 Q421.0194,564.1501 422.035,563.2751 Q423.0507,562.4001 424.8163,562.4001 Q425.6288,562.4001 426.4335,562.6501 Q427.2382,562.9001 428.0194,563.4001 L428.0194,566.4001 Q427.3944,565.4157 426.746,564.9079 Q426.0975,564.4001 425.4725,564.4001 Q424.7694,564.4001 424.4257,564.697 Q424.0819,564.9939 424.16,565.5407 Q424.2069,565.9626 424.4569,566.2204 Q424.7069,566.4782 425.4413,566.7439 L426.0819,566.9939 Q427.7069,567.6032 428.4257,568.5954 Q429.1444,569.5876 429.0194,571.1189 Q429.0194,572.7751 427.9257,573.5876 Q426.8319,574.4001 424.6132,574.4001 Q423.7069,574.4001 422.7928,574.1501 Q421.8788,573.9001 421.0194,573.4001 L421.0194,570.4001 Q421.8944,571.4157 422.7069,571.9079 Q423.5194,572.4001 424.3319,572.4001 Q425.1288,572.4001 425.5741,571.9939 Q426.0194,571.5876 426.0194,570.8532 Q426.0194,570.3064 425.8163,569.8923 Q425.6132,569.4782 425.2225,569.2439 L424.4882,568.947 Z "/><text fill="#000000" font-family="Courier" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="77" x="455.7694" y="564.9441">«Structure»</text><text fill="#000000" font-family="Courier" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="98" x="445.2694" y="579.3442">legsCollection</text><line style="stroke: #383838; stroke-width: 1.5;" x1="312.0194" x2="644.0194" y1="587.8002" y2="587.8002"/><polygon fill="none" points="322.0194,596.5003,318.0194,602.5003,326.0194,602.5003" style="stroke: #535353; stroke-width: 1.0;"/><text fill="#000000" font-family="Courier" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="112" x="331.0194" y="602.7443">sessionID string</text><polygon fill="none" points="322.0194,610.9004,318.0194,616.9004,326.0194,616.9004" style="stroke: #535353; stroke-width: 1.0;"/><text fill="#000000" font-family="Courier" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="133" x="331.0194" y="617.1444">legs      []legInfo</text><line style="stroke: #383838; stroke-width: 1.5;" x1="312.0194" x2="644.0194" y1="624.6004" y2="624.6004"/><ellipse cx="322.0194" cy="637.3005" fill="#A6A6A6" rx="3" ry="3" style="stroke: #545454; stroke-width: 1.0;"/><text fill="#000000" font-family="Courier" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="308" x="331.0194" y="639.5445">UpdateLegs(*memoryStorage,[]FullCallListLeg)</text><ellipse cx="322.0194" cy="651.7006" fill="#A6A6A6" rx="3" ry="3" style="stroke: #545454; stroke-width: 1.0;"/><text fill="#000000" font-family="Courier" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="147" x="331.0194" y="653.9446">Copy() legsCollection</text><ellipse cx="322.0194" cy="666.1007" fill="#A6A6A6" rx="3" ry="3" style="stroke: #545454; stroke-width: 1.0;"/><text fill="#000000" font-family="Courier" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="161" x="331.0194" y="668.3447">Collect() []*db.LegData</text><text fill="#000000" font-family="Courier" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="0" x="338.0194" y="682.7448"/><polygon fill="#6C6C6C" points="322.0194,690.6852,318.0194,696.6852,326.0194,696.6852" style="stroke: #535353; stroke-width: 1.0;"/><text fill="#000000" font-family="monospace" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="168" x="331.0194" y="697.3395">Вспомогательные методы()</text><!--class InnerCallInfo--><rect fill="#F8F8F8" filter="url(#f2lgmw0crtdlz)" height="79.6004" id="InnerCallInfo" style="stroke: #383838; stroke-width: 1.5;" width="264" x="47.0194" y="370"/><ellipse cx="129.2694" cy="389.4001" fill="#FFFFFF" rx="11" ry="11" style="stroke: #383838; stroke-width: 1.0;"/><path d="M128.9882,389.947 Q126.9569,389.3064 126.2381,388.5954 Q125.5194,387.8845 125.5194,386.697 Q125.5194,385.1501 126.535,384.2751 Q127.5506,383.4001 129.3163,383.4001 Q130.1288,383.4001 130.9335,383.6501 Q131.7382,383.9001 132.5194,384.4001 L132.5194,387.4001 Q131.8944,386.4157 131.246,385.9079 Q130.5975,385.4001 129.9725,385.4001 Q129.2694,385.4001 128.9257,385.697 Q128.5819,385.9939 128.66,386.5407 Q128.7069,386.9626 128.9569,387.2204 Q129.2069,387.4782 129.9413,387.7439 L130.5819,387.9939 Q132.2069,388.6032 132.9257,389.5954 Q133.6444,390.5876 133.5194,392.1189 Q133.5194,393.7751 132.4257,394.5876 Q131.3319,395.4001 129.1132,395.4001 Q128.2069,395.4001 127.2928,395.1501 Q126.3788,394.9001 125.5194,394.4001 L125.5194,391.4001 Q126.3944,392.4157 127.2069,392.9079 Q128.0194,393.4001 128.8319,393.4001 Q129.6288,393.4001 130.0741,392.9939 Q130.5194,392.5876 130.5194,391.8532 Q130.5194,391.3064 130.3163,390.8923 Q130.1132,390.4782 129.7225,390.2439 L128.9882,389.947 Z "/><text fill="#000000" font-family="Courier" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="77" x="156.7694" y="385.9441">«Structure»</text><text fill="#000000" font-family="Courier" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="91" x="149.7694" y="400.3442">InnerCallInfo</text><line style="stroke: #383838; stroke-width: 1.5;" x1="48.0194" x2="310.0194" y1="408.8002" y2="408.8002"/><text fill="#000000" font-family="Courier" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="252" x="53.0194" y="442.1444">UpdateData(*FullCallsListCall,int64)</text><line style="stroke: #383838; stroke-width: 1.5;" x1="48.0194" x2="151.0194" y1="424.0003" y2="424.0003"/><text fill="#000000" font-family="Courier" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="56" x="151.0194" y="427.2443">Override</text><line style="stroke: #383838; stroke-width: 1.5;" x1="207.0194" x2="310.0194" y1="424.0003" y2="424.0003"/><!--class OutboundCallInfo--><rect fill="#F8F8F8" filter="url(#f2lgmw0crtdlz)" height="262.6762" id="OutboundCallInfo" style="stroke: #383838; stroke-width: 1.5;" width="278" x="140.0194" y="8"/><ellipse cx="218.7694" cy="27.4001" fill="#FFFFFF" rx="11" ry="11" style="stroke: #383838; stroke-width: 1.0;"/><path d="M218.4882,27.947 Q216.4569,27.3064 215.7382,26.5954 Q215.0194,25.8845 215.0194,24.697 Q215.0194,23.1501 216.035,22.2751 Q217.0507,21.4001 218.8163,21.4001 Q219.6288,21.4001 220.4335,21.6501 Q221.2382,21.9001 222.0194,22.4001 L222.0194,25.4001 Q221.3944,24.4157 220.746,23.9079 Q220.0975,23.4001 219.4725,23.4001 Q218.7694,23.4001 218.4257,23.697 Q218.0819,23.9939 218.16,24.5407 Q218.2069,24.9626 218.4569,25.2204 Q218.7069,25.4782 219.4413,25.7439 L220.0819,25.9939 Q221.7069,26.6032 222.4257,27.5954 Q223.1444,28.5876 223.0194,30.1189 Q223.0194,31.7751 221.9257,32.5876 Q220.8319,33.4001 218.6132,33.4001 Q217.7069,33.4001 216.7928,33.1501 Q215.8788,32.9001 215.0194,32.4001 L215.0194,29.4001 Q215.8944,30.4157 216.7069,30.9079 Q217.5194,31.4001 218.3319,31.4001 Q219.1288,31.4001 219.5741,30.9939 Q220.0194,30.5876 220.0194,29.8532 Q220.0194,29.3064 219.8163,28.8923 Q219.6132,28.4782 219.2225,28.2439 L218.4882,27.947 Z "/><text fill="#000000" font-family="Courier" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="77" x="256.7694" y="23.9441">«Structure»</text><text fill="#000000" font-family="Courier" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="112" x="239.2694" y="38.3442">OutboundCallInfo</text><line style="stroke: #383838; stroke-width: 1.5;" x1="141.0194" x2="417.0194" y1="46.8002" y2="46.8002"/><polygon fill="none" points="151.0194,55.2846,147.0194,61.2846,155.0194,61.2846" style="stroke: #535353; stroke-width: 1.0;"/><text fill="#000000" font-family="monospace" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="182" x="160.0194" y="61.9389">Свойства исходящего звонка</text><text fill="#000000" font-family="Courier" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="0" x="167.0194" y="75.713"/><ellipse cx="151.0194" cy="106.2692" fill="#A6A6A6" rx="3" ry="3" style="stroke: #545454; stroke-width: 1.0;"/><text fill="#000000" font-family="Courier" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="252" x="160.0194" y="108.5132">UpdateData(*FullCallsListCall,int64)</text><ellipse cx="151.0194" cy="120.6693" fill="#A6A6A6" rx="3" ry="3" style="stroke: #545454; stroke-width: 1.0;"/><text fill="#000000" font-family="Courier" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="112" x="160.0194" y="122.9133">OnCallEnd(int64)</text><text fill="#000000" font-family="Courier" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="0" x="167.0194" y="137.3134"/><line style="stroke: #383838; stroke-width: 1.5;" x1="141.0194" x2="251.0194" y1="90.3691" y2="90.3691"/><text fill="#000000" font-family="Courier" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="56" x="251.0194" y="93.6131">Override</text><line style="stroke: #383838; stroke-width: 1.5;" x1="307.0194" x2="417.0194" y1="90.3691" y2="90.3691"/><polygon fill="#6C6C6C" points="151.0194,163.6539,147.0194,169.6539,155.0194,169.6539" style="stroke: #535353; stroke-width: 1.0;"/><text fill="#000000" font-family="monospace" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="147" x="160.0194" y="170.3082">Обработка сообщений()</text><text fill="#000000" font-family="Courier" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="0" x="167.0194" y="184.0824"/><line style="stroke: #383838; stroke-width: 1.0; stroke-dasharray: 1.0,2.0;" x1="141.0194" x2="237.0194" y1="151.9695" y2="151.9695"/><text fill="#000000" font-family="Courier" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="84" x="237.0194" y="155.2135">Update State</text><line style="stroke: #383838; stroke-width: 1.0; stroke-dasharray: 1.0,2.0;" x1="321.0194" x2="417.0194" y1="151.9695" y2="151.9695"/><polygon fill="#6C6C6C" points="151.0194,210.4229,147.0194,216.4229,155.0194,216.4229" style="stroke: #535353; stroke-width: 1.0;"/><text fill="#000000" font-family="monospace" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="133" x="160.0194" y="217.0772">Изменение статуса()</text><text fill="#000000" font-family="Courier" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="0" x="167.0194" y="230.8513"/><line style="stroke: #383838; stroke-width: 1.0; stroke-dasharray: 1.0,2.0;" x1="141.0194" x2="233.5194" y1="198.7385" y2="198.7385"/><text fill="#000000" font-family="Courier" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="91" x="233.5194" y="201.9825">State Machine</text><line style="stroke: #383838; stroke-width: 1.0; stroke-dasharray: 1.0,2.0;" x1="324.5194" x2="417.0194" y1="198.7385" y2="198.7385"/><polygon fill="#6C6C6C" points="151.0194,257.1918,147.0194,263.1918,155.0194,263.1918" style="stroke: #535353; stroke-width: 1.0;"/><text fill="#000000" font-family="monospace" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="210" x="160.0194" y="263.8461">Преобразование в сущность DB()</text><line style="stroke: #383838; stroke-width: 1.0; stroke-dasharray: 1.0,2.0;" x1="141.0194" x2="216.0194" y1="245.5074" y2="245.5074"/><text fill="#000000" font-family="Courier" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="126" x="216.0194" y="248.7514">Collect data to DB</text><line style="stroke: #383838; stroke-width: 1.0; stroke-dasharray: 1.0,2.0;" x1="342.0194" x2="417.0194" y1="245.5074" y2="245.5074"/><!--class legInfo--><rect fill="#F8F8F8" filter="url(#f2lgmw0crtdlz)" height="140.3381" id="legInfo" style="stroke: #383838; stroke-width: 1.5;" width="222" x="367.0194" y="764"/><ellipse cx="437.2694" cy="783.4001" fill="#FFFFFF" rx="11" ry="11" style="stroke: #383838; stroke-width: 1.0;"/><path d="M436.9882,783.947 Q434.9569,783.3064 434.2382,782.5954 Q433.5194,781.8845 433.5194,780.697 Q433.5194,779.1501 434.535,778.2751 Q435.5507,777.4001 437.3163,777.4001 Q438.1288,777.4001 438.9335,777.6501 Q439.7382,777.9001 440.5194,778.4001 L440.5194,781.4001 Q439.8944,780.4157 439.246,779.9079 Q438.5975,779.4001 437.9725,779.4001 Q437.2694,779.4001 436.9257,779.697 Q436.5819,779.9939 436.66,780.5407 Q436.7069,780.9626 436.9569,781.2204 Q437.2069,781.4782 437.9413,781.7439 L438.5819,781.9939 Q440.2069,782.6032 440.9257,783.5954 Q441.6444,784.5876 441.5194,786.1189 Q441.5194,787.7751 440.4257,788.5876 Q439.3319,789.4001 437.1132,789.4001 Q436.2069,789.4001 435.2928,789.1501 Q434.3788,788.9001 433.5194,788.4001 L433.5194,785.4001 Q434.3944,786.4157 435.2069,786.9079 Q436.0194,787.4001 436.8319,787.4001 Q437.6288,787.4001 438.0741,786.9939 Q438.5194,786.5876 438.5194,785.8532 Q438.5194,785.3064 438.3163,784.8923 Q438.1132,784.4782 437.7225,784.2439 L436.9882,783.947 Z "/><text fill="#000000" font-family="Courier" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="77" x="455.7694" y="779.9441">«Structure»</text><text fill="#000000" font-family="Courier" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="49" x="469.7694" y="794.3442">legInfo</text><line style="stroke: #383838; stroke-width: 1.5;" x1="368.0194" x2="588.0194" y1="802.8002" y2="802.8002"/><polygon fill="none" points="378.0194,811.2846,374.0194,817.2846,382.0194,817.2846" style="stroke: #535353; stroke-width: 1.0;"/><text fill="#000000" font-family="monospace" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="105" x="387.0194" y="817.9389">Состояние плеча</text><line style="stroke: #383838; stroke-width: 1.5;" x1="368.0194" x2="588.0194" y1="824.769" y2="824.769"/><polygon fill="#6C6C6C" points="378.0194,833.469,374.0194,839.469,382.0194,839.469" style="stroke: #535353; stroke-width: 1.0;"/><text fill="#000000" font-family="Courier" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="196" x="387.0194" y="839.713">updateData(*FullCallListLeg)</text><text fill="#000000" font-family="Courier" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="0" x="394.0194" y="854.1131"/><polygon fill="#6C6C6C" points="378.0194,862.0535,374.0194,868.0535,382.0194,868.0535" style="stroke: #535353; stroke-width: 1.0;"/><text fill="#000000" font-family="monospace" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="154" x="387.0194" y="868.7078">Вспомогательные методы</text><text fill="#000000" font-family="Courier" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="0" x="394.0194" y="882.482"/><polygon fill="#6C6C6C" points="378.0194,890.6381,374.0194,896.6381,382.0194,896.6381" style="stroke: #535353; stroke-width: 1.0;"/><text fill="#000000" font-family="Courier" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="189" x="387.0194" y="896.8821">collect(string) *db.LegData</text><!--class InboundCallInfo--><rect fill="#F8F8F8" filter="url(#f2lgmw0crtdlz)" height="262.6762" id="InboundCallInfo" style="stroke: #383838; stroke-width: 1.5;" width="278" x="538.0194" y="8"/><ellipse cx="620.2694" cy="27.4001" fill="#FFFFFF" rx="11" ry="11" style="stroke: #383838; stroke-width: 1.0;"/><path d="M619.9882,27.947 Q617.9569,27.3064 617.2382,26.5954 Q616.5194,25.8845 616.5194,24.697 Q616.5194,23.1501 617.535,22.2751 Q618.5507,21.4001 620.3163,21.4001 Q621.1288,21.4001 621.9335,21.6501 Q622.7382,21.9001 623.5194,22.4001 L623.5194,25.4001 Q622.8944,24.4157 622.246,23.9079 Q621.5975,23.4001 620.9725,23.4001 Q620.2694,23.4001 619.9257,23.697 Q619.5819,23.9939 619.66,24.5407 Q619.7069,24.9626 619.9569,25.2204 Q620.2069,25.4782 620.9413,25.7439 L621.5819,25.9939 Q623.2069,26.6032 623.9257,27.5954 Q624.6444,28.5876 624.5194,30.1189 Q624.5194,31.7751 623.4257,32.5876 Q622.3319,33.4001 620.1132,33.4001 Q619.2069,33.4001 618.2928,33.1501 Q617.3788,32.9001 616.5194,32.4001 L616.5194,29.4001 Q617.3944,30.4157 618.2069,30.9079 Q619.0194,31.4001 619.8319,31.4001 Q620.6288,31.4001 621.0741,30.9939 Q621.5194,30.5876 621.5194,29.8532 Q621.5194,29.3064 621.3163,28.8923 Q621.1132,28.4782 620.7225,28.2439 L619.9882,27.947 Z "/><text fill="#000000" font-family="Courier" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="77" x="654.7694" y="23.9441">«Structure»</text><text fill="#000000" font-family="Courier" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="105" x="640.7694" y="38.3442">InboundCallInfo</text><line style="stroke: #383838; stroke-width: 1.5;" x1="539.0194" x2="815.0194" y1="46.8002" y2="46.8002"/><polygon fill="none" points="549.0194,55.2846,545.0194,61.2846,553.0194,61.2846" style="stroke: #535353; stroke-width: 1.0;"/><text fill="#000000" font-family="monospace" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="175" x="558.0194" y="61.9389">Свойства входящего звонка</text><text fill="#000000" font-family="Courier" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="0" x="565.0194" y="75.713"/><ellipse cx="549.0194" cy="106.2692" fill="#A6A6A6" rx="3" ry="3" style="stroke: #545454; stroke-width: 1.0;"/><text fill="#000000" font-family="Courier" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="252" x="558.0194" y="108.5132">UpdateData(*FullCallsListCall,int64)</text><ellipse cx="549.0194" cy="120.6693" fill="#A6A6A6" rx="3" ry="3" style="stroke: #545454; stroke-width: 1.0;"/><text fill="#000000" font-family="Courier" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="112" x="558.0194" y="122.9133">OnCallEnd(int64)</text><text fill="#000000" font-family="Courier" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="0" x="565.0194" y="137.3134"/><line style="stroke: #383838; stroke-width: 1.5;" x1="539.0194" x2="649.0194" y1="90.3691" y2="90.3691"/><text fill="#000000" font-family="Courier" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="56" x="649.0194" y="93.6131">Override</text><line style="stroke: #383838; stroke-width: 1.5;" x1="705.0194" x2="815.0194" y1="90.3691" y2="90.3691"/><polygon fill="#6C6C6C" points="549.0194,163.6539,545.0194,169.6539,553.0194,169.6539" style="stroke: #535353; stroke-width: 1.0;"/><text fill="#000000" font-family="monospace" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="147" x="558.0194" y="170.3082">Обработка сообщений()</text><text fill="#000000" font-family="Courier" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="0" x="565.0194" y="184.0824"/><line style="stroke: #383838; stroke-width: 1.0; stroke-dasharray: 1.0,2.0;" x1="539.0194" x2="635.0194" y1="151.9695" y2="151.9695"/><text fill="#000000" font-family="Courier" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="84" x="635.0194" y="155.2135">Update State</text><line style="stroke: #383838; stroke-width: 1.0; stroke-dasharray: 1.0,2.0;" x1="719.0194" x2="815.0194" y1="151.9695" y2="151.9695"/><polygon fill="#6C6C6C" points="549.0194,210.4229,545.0194,216.4229,553.0194,216.4229" style="stroke: #535353; stroke-width: 1.0;"/><text fill="#000000" font-family="monospace" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="133" x="558.0194" y="217.0772">Изменение статуса()</text><text fill="#000000" font-family="Courier" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="0" x="565.0194" y="230.8513"/><line style="stroke: #383838; stroke-width: 1.0; stroke-dasharray: 1.0,2.0;" x1="539.0194" x2="631.5194" y1="198.7385" y2="198.7385"/><text fill="#000000" font-family="Courier" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="91" x="631.5194" y="201.9825">State Machine</text><line style="stroke: #383838; stroke-width: 1.0; stroke-dasharray: 1.0,2.0;" x1="722.5194" x2="815.0194" y1="198.7385" y2="198.7385"/><polygon fill="#6C6C6C" points="549.0194,257.1918,545.0194,263.1918,553.0194,263.1918" style="stroke: #535353; stroke-width: 1.0;"/><text fill="#000000" font-family="monospace" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="210" x="558.0194" y="263.8461">Преобразование в сущность DB()</text><line style="stroke: #383838; stroke-width: 1.0; stroke-dasharray: 1.0,2.0;" x1="539.0194" x2="614.0194" y1="245.5074" y2="245.5074"/><text fill="#000000" font-family="Courier" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="126" x="614.0194" y="248.7514">Collect data to DB</text><line style="stroke: #383838; stroke-width: 1.0; stroke-dasharray: 1.0,2.0;" x1="740.0194" x2="815.0194" y1="245.5074" y2="245.5074"/><!--link callInfoBase to Call--><path d="M610.2235,410 C615.0981,410 619.9726,410 624.8471,410 " fill="none" id="callInfoBase-Call" style="stroke: #383838; stroke-width: 1.0;"/><polygon fill="none" points="624.8869,402.9999,644.8869,410,624.8869,416.9999,624.8869,402.9999" style="stroke: #383838; stroke-width: 1.0;"/><!--link callInfoBase to legsCollection--><path d="M478.0194,489.0805 C478.0194,504.1221 478.0194,519.9756 478.0194,535.3565 " fill="none" id="callInfoBase-legsCollection" style="stroke: #383838; stroke-width: 1.0;"/><polygon fill="#FFFFFF" points="478.0194,548.719,482.0194,542.719,478.0194,536.719,474.0194,542.719,478.0194,548.719" style="stroke: #383838; stroke-width: 1.0;"/><!--link InnerCallInfo to callInfoBase--><path d="M311.2919,410 C318.3932,410 325.4945,410 332.5958,410 " fill="none" id="InnerCallInfo-callInfoBase" style="stroke: #383838; stroke-width: 1.0;"/><polygon fill="#383838" points="345.8097,410,339.8097,406,333.8097,410,339.8097,414,345.8097,410" style="stroke: #383838; stroke-width: 1.0;"/><!--link OutboundCallInfo to callInfoBase--><path d="M375.8961,271.1842 C388.1036,287.7777 400.3637,304.4428 411.9408,320.1795 " fill="none" id="OutboundCallInfo-callInfoBase" style="stroke: #383838; stroke-width: 1.0;"/><polygon fill="#383838" points="419.8375,330.9136,419.504,323.7102,412.7264,321.2476,413.0599,328.4509,419.8375,330.9136" style="stroke: #383838; stroke-width: 1.0;"/><!--link OutboundCallInfo to legInfo--><path d="M139.9597,212.0107 C96.2283,242.4304 53.1001,282.2205 29.0194,331 C-2.0654,393.9674 -1.124,425.5765 29.0194,489 C94.6719,627.1367 246.3617,724.7958 355.2639,780.1567 " fill="none" id="OutboundCallInfo-legInfo" style="stroke: #383838; stroke-width: 1.0;"/><polygon fill="#FFFFFF" points="366.9916,786.0397,363.4222,779.774,356.2656,780.659,359.835,786.9247,366.9916,786.0397" style="stroke: #383838; stroke-width: 1.0;"/><!--link InboundCallInfo to callInfoBase--><path d="M580.1427,271.1842 C567.9353,287.7777 555.6752,304.4428 544.0981,320.1795 " fill="none" id="InboundCallInfo-callInfoBase" style="stroke: #383838; stroke-width: 1.0;"/><polygon fill="#383838" points="536.2013,330.9136,542.9789,328.4509,543.3124,321.2476,536.5348,323.7102,536.2013,330.9136" style="stroke: #383838; stroke-width: 1.0;"/><!--link InboundCallInfo to legInfo--><path d="M816.4114,260.4242 C822.2507,264.1473 828.1304,267.6902 834.0194,271 C906.4301,311.697 962.6225,263.4923 1011.0194,331 C1051.9343,388.0713 1044.5728,427.3126 1011.0194,489 C924.5995,647.8818 729.9982,744.8243 601.3945,793.9565 " fill="none" id="InboundCallInfo-legInfo" style="stroke: #383838; stroke-width: 1.0;"/><polygon fill="#FFFFFF" points="589.1608,798.5625,596.1854,800.1919,600.3912,794.3343,593.3666,792.7049,589.1608,798.5625" style="stroke: #383838; stroke-width: 1.0;"/><!--link legsCollection to legInfo--><path d="M478.0194,704.0604 C478.0194,719.1959 478.0194,735.127 478.0194,750.4469 " fill="none" id="legsCollection-legInfo" style="stroke: #383838; stroke-width: 1.0;"/><polygon fill="#FFFFFF" points="478.0194,763.7172,482.0194,757.7172,478.0194,751.7172,474.0194,757.7172,478.0194,763.7172" style="stroke: #383838; stroke-width: 1.0;"/><!--
@startuml

skinparam {
    monochrome true
    classFontSize 12
    classAttributeFontSize 12
    defaultFontName Courier
}

interface Call << (I,empty) Interface >> {
    Load(*memoryStorage, []naubuddy.FullCallListLeg)
    UpdateData(*naubuddy.FullCallsListCall, int64)
    ProjectIDChanged() bool
    SpawnInboundCall() Call
    OnCallEnd(endTimestamp int64)
}

enum callState << (E,empty) Enum >> {
    Undefined
    Blocked
    Queued
    Callback
    Unblocked
    Connected
    Ended
}

class callInfoBase << (S,empty) Structure >> {
    ~{field} ""Общие свойства звонка""
    ~{field} ""Сервис доступа к Redis по проектам""

    __ implement Call __
    +""Реализация интерфейса Call""

    ..
    ~{method}""Общие методы звонка""
}

callInfoBase -|> Call
callInfoBase - -o legsCollection

class InnerCallInfo << (S,empty) Structure >> {
    __ Override __
    UpdateData(*FullCallsListCall,int64)
}

InnerCallInfo -l-* callInfoBase

class OutboundCallInfo << (S,empty) Structure >> {
    ~{field} ""Свойства исходящего звонка""

    __ Override __
    +UpdateData(*FullCallsListCall,int64)
    +OnCallEnd(int64)

    .. Update State ..
    ~{method}""Обработка сообщений()""

    .. State Machine ..
    ~{method}""Изменение статуса()""

    .. Collect data to DB ..
    ~{method}""Преобразование в сущность DB()""
}

OutboundCallInfo - -* callInfoBase
OutboundCallInfo - -o legInfo

class InboundCallInfo << (S,empty) Structure >> {
    ~{field} ""Свойства входящего звонка""

    __ Override __
    +UpdateData(*FullCallsListCall,int64)
    +OnCallEnd(int64)

    .. Update State ..
    ~{method}""Обработка сообщений()""

    .. State Machine ..
    ~{method}""Изменение статуса()""

    .. Collect data to DB ..
    ~{method}""Преобразование в сущность DB()""
}

InboundCallInfo - -* callInfoBase
InboundCallInfo - -o legInfo

class legInfo << (S,empty) Structure >> {
    ~{field}""Состояние плеча""

    ~updateData(*FullCallListLeg)

    ~{method}""Вспомогательные методы""

    ~collect(string) *db.LegData
}

class legsCollection << (S,empty) Structure >> {
    ~sessionID string
    ~legs      []legInfo

    +UpdateLegs(*memoryStorage,[]FullCallListLeg)
    +Copy() legsCollection
    +Collect() []*db.LegData

    ~{method}""Вспомогательные методы()""
}

legsCollection - -o legInfo

hide interface fields
hide enum methods

@enduml

PlantUML version 1.2018.11(Sat Sep 22 21:43:53 YEKT 2018)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 1.8.0_152-release-1343-b26
Operating System: Linux
OS Version: 4.15.0-45-generic
Default Encoding: UTF-8
Language: ru
Country: RU
--></g></svg>